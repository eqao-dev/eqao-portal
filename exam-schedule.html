<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>授業履歴 - 大科目・小科目表示サンプル</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: linear-gradient(135deg, #f8f9fc 0%, #e8ecf4 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* セクション */
    .section {
      background: white;
      border-radius: 12px;
      margin-bottom: 16px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }

    .section-header {
      background: linear-gradient(135deg, #B2DFDB 0%, #80CBC4 100%);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 2px solid #00695C;
    }

    .section-header .material-icons {
      color: #00695C;
      font-size: 20px;
    }

    .section-title {
      font-size: 15px;
      font-weight: 700;
      color: #004D40;
    }

    .section-content {
      padding: 16px;
    }

    /* 授業リスト（横スクロール） */
    .lesson-list-wrapper {
      margin-bottom: 16px;
    }

    .lesson-list {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 8px;
      -webkit-overflow-scrolling: touch;
    }

    .lesson-list::-webkit-scrollbar {
      height: 6px;
    }

    .lesson-list::-webkit-scrollbar-track {
      background: #F0F0F0;
      border-radius: 3px;
    }

    .lesson-list::-webkit-scrollbar-thumb {
      background: #BDBDBD;
      border-radius: 3px;
    }

    .lesson-item {
      flex-shrink: 0;
      min-width: 100px;
      padding: 12px 14px;
      background: white;
      border: 2px solid #E0E0E0;
      border-radius: 12px;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }

    .lesson-item:hover {
      border-color: #00897B;
      background: #E0F2F1;
    }

    .lesson-item.active {
      border-color: #00897B;
      background: linear-gradient(135deg, #00897B 0%, #26A69A 100%);
      color: white;
    }

    .lesson-item-date {
      font-size: 14px;
      font-weight: 700;
    }

    .lesson-item-type {
      font-size: 11px;
      font-weight: 600;
      margin-top: 4px;
      padding: 2px 8px;
      border-radius: 10px;
      display: inline-block;
    }

    .lesson-item:not(.active) .lesson-item-type.type-english {
      background: rgba(136, 14, 79, 0.15);
      color: #880e4f;
    }

    .lesson-item:not(.active) .lesson-item-type.type-essay {
      background: rgba(230, 81, 0, 0.15);
      color: #e65100;
    }

    .lesson-item:not(.active) .lesson-item-type.type-interview {
      background: rgba(27, 94, 32, 0.15);
      color: #1b5e20;
    }

    .lesson-item:not(.active) .lesson-item-type.type-normal {
      background: rgba(26, 35, 126, 0.15);
      color: #1a237e;
    }

    .lesson-item.active .lesson-item-type {
      background: rgba(255, 255, 255, 0.25);
      color: white;
    }

    .lesson-item-teacher {
      font-size: 11px;
      margin-top: 4px;
      opacity: 0.8;
    }

    /* 詳細カード */
    .lesson-detail-card {
      background: #FAFAFA;
      border-radius: 12px;
      padding: 20px;
      display: none;
    }

    .lesson-detail-card.show {
      display: block;
    }

    .lesson-detail-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .lesson-detail-date {
      font-size: 18px;
      font-weight: 700;
      color: #333;
    }

    .lesson-detail-badge {
      font-size: 12px;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: 12px;
      color: white;
    }

    .lesson-detail-badge.type-english {
      background: linear-gradient(135deg, #880e4f 0%, #ad1457 100%);
    }

    .lesson-detail-badge.type-essay {
      background: linear-gradient(135deg, #e65100 0%, #f57c00 100%);
    }

    .lesson-detail-badge.type-interview {
      background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%);
    }

    .lesson-detail-badge.type-normal {
      background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%);
    }

    .lesson-detail-teacher {
      font-size: 14px;
      color: #666;
    }

    .lesson-detail-section {
      background: white;
      border-radius: 8px;
      padding: 14px;
      margin-top: 12px;
    }

    .lesson-detail-section-title {
      font-size: 12px;
      font-weight: 700;
      color: #00897B;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .lesson-detail-section-title .material-icons {
      font-size: 16px;
    }

    .lesson-detail-section-content {
      font-size: 14px;
      color: #444;
      line-height: 1.7;
      padding-left: 22px;
    }

    /* ==============================
       大科目・小科目の表示スタイル
       ============================== */
    
    /* 大科目バッジ */
    .major-subject-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(135deg, #00695C 0%, #00897B 100%);
      color: white;
      padding: 10px 16px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
    }

    .major-subject-number {
      background: rgba(255,255,255,0.25);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* 小科目チップ */
    .minor-subjects-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .minor-subject-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #E0F2F1;
      color: #00695C;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      border: 1px solid #B2DFDB;
    }

    .minor-subject-chip .material-icons {
      font-size: 16px;
      color: #00897B;
    }

    /* カリキュラムセクション */
    .curriculum-section {
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      border-radius: 8px;
      padding: 14px;
      margin-top: 12px;
      border: 1px solid #A5D6A7;
    }

    .curriculum-section-title {
      font-size: 12px;
      font-weight: 700;
      color: #2E7D32;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .curriculum-section-title .material-icons {
      font-size: 18px;
    }

    /* レスポンシブ */
    @media (max-width: 600px) {
      body {
        padding: 12px;
      }

      .major-subject-badge {
        font-size: 13px;
        padding: 8px 14px;
      }

      .major-subject-number {
        width: 22px;
        height: 22px;
        font-size: 11px;
      }

      .minor-subject-chip {
        font-size: 12px;
        padding: 6px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 宿題・授業履歴セクション -->
    <div class="section">
      <div class="section-header">
        <span class="material-icons">assignment</span>
        <span class="section-title">宿題・授業履歴</span>
      </div>
      <div class="section-content">
        <!-- 授業リスト（横スクロール） -->
        <div class="lesson-list-wrapper">
          <div class="lesson-list" id="lessonList">
            <!-- JSで描画 -->
          </div>
        </div>

        <!-- 詳細表示エリア -->
        <div class="lesson-detail-card show" id="lessonDetail">
          <!-- JSで描画 -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // 大科目データ
    // ============================================
    const majorSubjects = {
      1: "全体像理解・進路理解",
      2: "自己分析・現状把握・原材料抽出",
      3: "研究テーマ・志望校マッチング",
      4: "研究実践",
      5: "小論文準備",
      6: "書類作成（志望理由書と自己推薦書）",
      7: "課題レポート",
      8: "プレゼン",
      9: "面接",
      10: "最終確認・調整"
    };

    // ============================================
    // サンプル授業データ（大科目・小科目付き）
    // ============================================
    const lessonData = [
      {
        date: '12/10（火）',
        type: '通常授業',
        teacher: '山田先生',
        // 大科目番号
        majorSubjectId: 6,
        // 小科目（複数選択可能）
        minorSubjects: [
          '志望理由書テクニック（構成・段落）',
          '志望理由書実践と修正'
        ],
        content: '・志望理由書の黄金構成を解説<br>・きっかけ→課題意識→試行錯誤→学びの必要性→マッチング→学習計画<br>・第1段落を添削',
        homework: '・志望理由書の第2〜3段落を書いてくる<br>・教授の研究テーマを3つ調べてメモする'
      },
      {
        date: '12/8（日）',
        type: '小論文',
        teacher: '佐藤先生',
        majorSubjectId: 5,
        minorSubjects: [
          '小論文過去問演習'
        ],
        content: '・志望校の過去問演習（2023年度）<br>・論理構成の見直し',
        homework: '・過去問をもう1年分解く<br>・時事ニュース5本を要約'
      },
      {
        date: '12/5（木）',
        type: '面接対策',
        teacher: '鈴木先生',
        majorSubjectId: 9,
        minorSubjects: [
          '面接基礎100問の言語化',
          '発声・表情・視線のコントロール'
        ],
        content: '・模擬面接の実施<br>・志望動機の深掘り練習<br>・非言語コミュニケーションの確認',
        homework: '・想定質問50問への回答を用意<br>・自己PRの1分バージョンを暗記<br>・鏡の前で練習'
      },
      {
        date: '12/3（火）',
        type: '通常授業',
        teacher: '山田先生',
        majorSubjectId: 3,
        minorSubjects: [
          '仮説検証とテーマ深掘り',
          '研究ツールの使い方（論文検索・ResearchMap等）'
        ],
        content: '・CiNiiとGoogle Scholarを使った論文検索の実践<br>・先行研究を3本読み、リサーチクエスチョンを再設定',
        homework: '・見つけた論文を1本読んで要約（300字）<br>・自分の研究テーマとの関連性をメモ'
      },
      {
        date: '12/1（日）',
        type: '通常授業',
        teacher: '佐藤先生',
        majorSubjectId: 2,
        minorSubjects: [
          '過去の振り返り（ライフライン分析）',
          '現在の自己理解と価値観整理',
          '研究テーマに繋がる素材抽出'
        ],
        content: '・ライフラインチャートを作成<br>・感情の山谷を整理<br>・高校2年の文化祭実行委員の経験から「リーダーシップ」と「地域貢献」を抽出',
        homework: '・3案の研究テーマについて「なぜ興味があるか」を200字で書く<br>・関連しそうな大学・学部を3つずつリストアップ'
      },
      {
        date: '11/28（木）',
        type: '面接対策',
        teacher: '鈴木先生',
        majorSubjectId: 9,
        minorSubjects: [
          '圧迫面接・深掘り/口頭試問対策'
        ],
        content: '・圧迫質問への対応練習<br>・矛盾を指摘された時の切り返し方<br>・「研究テーマに戻る」技術の習得',
        homework: '・想定される反論を10個書き出す<br>・それぞれへの回答を用意'
      },
      {
        date: '11/26（火）',
        type: '通常授業',
        teacher: '山田先生',
        majorSubjectId: 4,
        minorSubjects: [
          '研究テーマの実践',
          '先行研究・論文・書籍の読み込み'
        ],
        content: '・フィールドワークの計画立案<br>・アンケート設計の基礎<br>・先行研究のまとめ方',
        homework: '・アンケート質問項目を10問作成<br>・関連書籍を1冊読み始める'
      },
      {
        date: '11/24（日）',
        type: '小論文',
        teacher: '佐藤先生',
        majorSubjectId: 5,
        minorSubjects: [
          '小論文テクニック（段落構成・型理解）',
          '小論文基礎演習'
        ],
        content: '・結論→理由→具体例→反論→結論の構成練習<br>・要約問題の解き方',
        homework: '・新聞社説を3本要約（各200字）<br>・小論文基礎問題を2問解く'
      }
    ];

    let selectedLessonIndex = 0;

    // 授業種類に応じたCSSクラスを取得
    function getLessonTypeClass(type) {
      if (!type) return 'type-normal';
      if (type.includes('英語')) return 'type-english';
      if (type.includes('小論文')) return 'type-essay';
      if (type.includes('面接')) return 'type-interview';
      return 'type-normal';
    }

    // HTMLエスケープ
    function escapeHtml(str) {
      if (!str) return '';
      return str.replace(/[&<>"']/g, function(match) {
        const escape = {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        };
        return escape[match];
      });
    }

    // 授業リストを描画
    function renderLessonList() {
      const container = document.getElementById('lessonList');
      
      let html = '';
      lessonData.forEach((lesson, index) => {
        const typeClass = getLessonTypeClass(lesson.type);
        const activeClass = index === selectedLessonIndex ? 'active' : '';
        html += `
          <div class="lesson-item ${activeClass}" onclick="selectLesson(${index})">
            <div class="lesson-item-date">${escapeHtml(lesson.date)}</div>
            <div class="lesson-item-type ${typeClass}">${escapeHtml(lesson.type)}</div>
            <div class="lesson-item-teacher">${escapeHtml(lesson.teacher)}</div>
          </div>
        `;
      });
      
      container.innerHTML = html;
      renderLessonDetail();
    }

    // 授業を選択
    function selectLesson(index) {
      selectedLessonIndex = index;
      
      // アクティブ状態を更新
      document.querySelectorAll('.lesson-item').forEach((item, i) => {
        if (i === index) {
          item.classList.add('active');
        } else {
          item.classList.remove('active');
        }
      });
      
      renderLessonDetail();
    }

    // 授業詳細を描画
    function renderLessonDetail() {
      const container = document.getElementById('lessonDetail');
      const lesson = lessonData[selectedLessonIndex];
      
      if (!lesson) {
        container.classList.remove('show');
        return;
      }
      
      const typeClass = getLessonTypeClass(lesson.type);
      
      // 大科目の情報
      const majorSubjectId = lesson.majorSubjectId;
      const majorSubjectName = majorSubjects[majorSubjectId] || '未設定';
      
      // 小科目のチップを生成
      let minorSubjectsHtml = '';
      if (lesson.minorSubjects && lesson.minorSubjects.length > 0) {
        minorSubjectsHtml = '<div class="minor-subjects-list">';
        lesson.minorSubjects.forEach(subject => {
          minorSubjectsHtml += `
            <span class="minor-subject-chip">
              <span class="material-icons">check_circle</span>
              ${escapeHtml(subject)}
            </span>
          `;
        });
        minorSubjectsHtml += '</div>';
      }
      
      container.innerHTML = `
        <div class="lesson-detail-header">
          <div class="lesson-detail-date">${escapeHtml(lesson.date)}</div>
          <div class="lesson-detail-badge ${typeClass}">${escapeHtml(lesson.type)}</div>
          <div class="lesson-detail-teacher">${escapeHtml(lesson.teacher)}</div>
        </div>
        
        <!-- ★ 大科目・小科目セクション（追加部分） -->
        <div class="curriculum-section">
          <div class="curriculum-section-title">
            <span class="material-icons">school</span>
            カリキュラム
          </div>
          
          <!-- 大科目 -->
          <div class="major-subject-badge">
            <span class="major-subject-number">${majorSubjectId}</span>
            ${escapeHtml(majorSubjectName)}
          </div>
          
          <!-- 小科目 -->
          ${minorSubjectsHtml}
        </div>
        
        <div class="lesson-detail-section">
          <div class="lesson-detail-section-title">
            <span class="material-icons">menu_book</span>
            授業内容
          </div>
          <div class="lesson-detail-section-content">${lesson.content}</div>
        </div>
        
        <div class="lesson-detail-section">
          <div class="lesson-detail-section-title">
            <span class="material-icons">edit_note</span>
            宿題／課題
          </div>
          <div class="lesson-detail-section-content">${lesson.homework}</div>
        </div>
      `;
      
      container.classList.add('show');
    }

    // 初期化
    document.addEventListener('DOMContentLoaded', function() {
      renderLessonList();
    });
  </script>
</body>
</html>
